# Splunk topology intake uses basic authentication

init_config:
  # time before a HTTP request times out
  default_request_timeout_seconds: 10

  # a search on a saved search does not immediately return results, one has to retry until data is received,
  # search_max_retry_count specifies the number of retries in which it expects results to be available.
  # Between each retry some time is waited before retrying, specified by search_seconds_between_retries.
  default_search_max_retry_count: 10
  default_search_seconds_between_retries: 1

  # The number of saved searches to dispatch and await for results simultaneously.
  default_saved_searches_parallel: 3

  # How many results should we request per request to splunk
  default_batch_size: 1000

  # Interval at which to dispatch a saved search
  default_polling_interval_seconds: 300

  # verify ssl certificate of the connection to Splunk
  default_verify_ssl_certificate: false

  # the Splunk app in where the saved searches are located
  default_app: "search"

  # default parameters for the Splunk saved search query, these parameters make sure the query refreshes.
  default_parameters:
    force_dispatch: true
    dispatch.now: true


# Currently it is not possible to specify multiple instances with the same url.
# It is possible to specify multiple saved_searches on a single instance.
instances:
  - url: "https://localhost:8089"
    # verify_ssl_certificate: false
    # new authentication structure either token or basic auth will be used.
    authentication:
      basic_auth:
        username: "admin"
        password: "admin"
      # token: "some_value"

    # audience param will be used when token based authentication activated
    # audience: "search"

    # token_expiration_days also works only in token based authentication and this value used to set expiry days for
    # create a new token after first initial token is provided. By default the value is 90 days.
    # token_expiration_days: 90

    # Determine whether to produce topology in snapshots, defaults to true
    # snapshot: true
    # polling_interval_seconds: 300
    # saved_searches_parallel: 5

    # make the agent less strict and allow for saved searches to be failing or missing
    ignore_saved_search_errors: true

    component_saved_searches:
      - name: "components"
        # Wilcard match to find component queries, can be used instead of name
        # match: "comp.*"
        # app: "search"
        # request_timeout_seconds: 10
        # search_max_retry_count: 5
        # search_seconds_between_retries: 1
        # batch_size: 1000
        # parameters:
        #   force_dispatch: true
        #   dispatch.now: true
    relation_saved_searches:
      #- name: "relations"
      # Wilcard match to find relation queries, can be used instead of name
      #  match: "relation*"
      #  app: "search"
      #  request_timeout_seconds: 10
      #  search_max_retry_count: 5
      #  search_seconds_between_retries: 1
      #  parameters:
      #    force_dispatch: true
      #    dispatch.now: true

    # tags:
    #      - optional_tag1
    #      - optional_tag2
